<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Portal Ambiental Paisagismo</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#0b2b16">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}
body{background:#071b12;color:#eafff1}

/* HERO */
.hero{
  min-height:90vh;
  background:
    linear-gradient(to bottom,rgba(0,0,0,.45),#071b12),
    url("assets/fotos/logo.png") center/cover;
  display:flex;
  align-items:center;
}
.hero-content{padding:80px 8vw;max-width:760px}
.hero h1{letter-spacing:.22em;color:#8dffd1;font-size:2.2rem}
.hero p{opacity:.9;margin-top:14px;line-height:1.6}

/* PORTAL */
.portal{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:30px;
  padding:70px 8vw;
}
.card{
  background:#0e2f20;
  padding:34px;
  border-radius:22px;
  text-align:center;
  transition:.3s;
}
.card:hover{transform:translateY(-8px);box-shadow:0 20px 40px rgba(0,0,0,.4)}
.card h3{color:#7cffb2;margin-bottom:10px}
.card a{
  display:inline-block;
  margin-top:14px;
  padding:12px 26px;
  border-radius:30px;
  background:#7cffb2;
  color:#003b22;
  text-decoration:none;
  font-weight:600;
}

/* CHATBOT */
.chatbot-btn{
  position:fixed;right:20px;bottom:20px;
  background:#7cffb2;color:#003b22;
  border:none;border-radius:50%;
  width:60px;height:60px;
  font-size:26px;cursor:pointer;
  box-shadow:0 0 20px rgba(124,255,178,.8);
}

.chatbox{
  position:fixed;right:20px;bottom:90px;
  width:320px;max-height:420px;
  background:#0e2f20;border-radius:18px;
  display:none;flex-direction:column;
  overflow:hidden;border:1px solid #2f6b4f;
}

.chat-header{
  padding:12px;text-align:center;
  background:#0b2418;font-weight:600;
}

.chat-messages{
  flex:1;padding:12px;overflow-y:auto;font-size:.9rem;
}

.msg{margin-bottom:10px}
.bot{color:#7cffb2}
.user{text-align:right;color:#fff}
.typing{font-style:italic;opacity:.7}

.chat-input{
  display:flex;border-top:1px solid #2f6b4f;
}
.chat-input input{
  flex:1;padding:10px;border:none;outline:none;
  background:#0e2f20;color:#fff;
}
.chat-input button{
  background:#7cffb2;border:none;padding:0 16px;
  cursor:pointer;font-weight:600;
}
</style>
</head>

<body>

<!-- ðŸŽµ MUSICA DE FUNDO -->
<audio id="bgMusic" loop>
  <source src="assets/fotos/ambiente.mp3" type="audio/mpeg">
</audio>

<section class="hero">
  <div class="hero-content">
    <h1>PORTAL DO PAISAGISMO</h1>
    <p>
      ConheÃ§a as Ã¡rvores e monumentos da praÃ§a.<br>
      EducaÃ§Ã£o ambiental simples, direta e acessÃ­vel.
    </p>
  </div>
</section>

<section class="portal">
  <div class="card">
    <h3>ðŸŒ³ VegetaÃ§Ã£o</h3>
    <p>InformaÃ§Ãµes botÃ¢nicas, fotos e curiosidades.</p>
    <a href="ipe-amarelo.html">Explorar</a>
  </div>

  <div class="card">
    <h3>ðŸ—¿ Monumento</h3>
    <p>HistÃ³ria e significado cultural.</p>
    <a href="monumento.html">Explorar</a>
  </div>
</section>

<button class="chatbot-btn" onclick="toggleChat()">ðŸ’¬</button>

<div class="chatbox" id="chatbox">
  <div class="chat-header">ðŸŒ¿ Auria â€” Assistente Ambiental</div>
  <div class="chat-messages" id="messages"></div>
  <div class="chat-input">
    <input id="userInput" placeholder="Digite sua pergunta...">
    <button onclick="sendMsg()">Enviar</button>
  </div>
</div>

<script>
let chatOpened=false;
let lastWasGreeting=false;
let lastTopic=null;

/* ===== MUSICA ===== */
let musicStarted=false;
function startMusic(){
  if(musicStarted) return;
  const music=document.getElementById("bgMusic");
  music.volume=0.25;
  music.play().catch(()=>{});
  musicStarted=true;
}

/* ===== CHAT ===== */
function toggleChat(){
  startMusic(); // inicia mÃºsica no primeiro clique

  const c=document.getElementById("chatbox");
  const i=document.getElementById("userInput");

  const opening = c.style.display !== "flex";
  c.style.display = opening ? "flex" : "none";

  if(opening && !chatOpened){
    chatOpened=true;
    setTimeout(()=>{
      addMsg("OlÃ¡! Eu sou a Auria ðŸŒ±, criada pelo setor de paisagismo para te ajudar!","bot");
      addMsg("Pergunte sobre Ã¡rvores, jardins, praÃ§a, monumentos ou meio ambiente ðŸ˜Š","bot");
      i.focus();
    },300);
  }
}

function addMsg(text,cls){
  const div=document.createElement("div");
  div.className="msg "+cls;
  div.innerText=text;
  const box=document.getElementById("messages");
  box.appendChild(div);
  box.scrollTop=box.scrollHeight;
}

function normalize(t){
  return t.toLowerCase()
    .normalize("NFD").replace(/[\u0300-\u036f]/g,"")
    .replace(/[^a-z0-9\s]/g,"")
    .trim();
}


/* ===== AURIA â€” MOTOR MVP TURBINADO ===== */
function botReply(q){

  if(!q || !q.trim())
    return "Pode mandar a pergunta ðŸ˜„ Posso falar de Ã¡rvores, jardins, meio ambiente, praÃ§a ou monumentos.";

  q = normalize(q);

  // CorreÃ§Ãµes comuns de digitaÃ§Ã£o
  q = q
    .replace("jardin","jardim")
    .replace("jardims","jardins")
    .replace("arvores","arvore")
    .replace("monumeto","monumento");

  let r;

  /* ===== CONFIRMAÃ‡Ã•ES SIM / NÃƒO ===== */
  if(/\b(sim|claro|ok|pode|manda)\b/.test(q)){
    if(lastTopic==="jardins") return "Show ðŸ˜„ Quer saber sobre jardim japonÃªs, europeu ou tropical?";
    if(lastTopic==="arvores") return "Boa ðŸŒ³ Quer saber sobre espÃ©cies, benefÃ­cios ou plantio?";
    if(lastTopic==="monumentos") return "Beleza! Posso falar da histÃ³ria ou da importÃ¢ncia cultural.";
    if(lastTopic==="meioambiente") return "Perfeito ðŸŒ Posso falar de reciclagem, Ã¡gua ou clima.";
    return "Legal! Sobre o que quer conversar: Ã¡rvores, jardins, praÃ§a ou monumentos? ðŸŒ¿";
  }

  if(/\b(nao|nÃ£o|depois|agora nao)\b/.test(q)){
    return "Tranquilo ðŸ˜„ quando quiser Ã© sÃ³ perguntar! Posso falar de natureza, jardins ou da praÃ§a ðŸŒ±";
  }

  /* ===== CONTINUIDADE ===== */
  if(/\b(me fala mais|mais disso|continua|detalha|explica mais)\b/.test(q)){
    if(lastTopic==="jardins")
      return "AlÃ©m de beleza, jardins ajudam no conforto tÃ©rmico e bem-estar das pessoas.";
    if(lastTopic==="arvores")
      return "Ãrvores tambÃ©m reduzem enchentes e melhoram a qualidade do solo.";
    if(lastTopic==="monumentos")
      return "Eles tambÃ©m servem como pontos turÃ­sticos e educativos.";
    if(lastTopic==="meioambiente")
      return "Economizar energia e reduzir lixo tambÃ©m faz muita diferenÃ§a.";
    if(lastTopic==="praca")
      return "A praÃ§a tambÃ©m ajuda na socializaÃ§Ã£o e na saÃºde mental.";
    return "Sobre qual assunto vocÃª quer que eu continue? ðŸŒ¿";
  }

  /* ===== CUMPRIMENTOS ===== */
  if(/\b(oi+|ola+|eai+|opa|salve|fala|hey|bom dia|boa tarde|boa noite)\b/.test(q)){
    r=[
      "Oi! ðŸ˜„ Em que posso ajudar?",
      "E aÃ­! ðŸŒ± Bora aprender algo?",
      "OlÃ¡! ðŸŒ¿ Pergunta aÃ­!",
      "Salve! ðŸ˜Ž Manda a dÃºvida!",
      "Oi! Quer saber algo sobre a praÃ§a ou natureza?"
    ];
    return r[Math.floor(Math.random()*r.length)];
  }

  /* ===== IDENTIDADE ===== */
  if(q.includes("auria") || q.includes("quem e voce") || q.includes("quem Ã© vocÃª"))
    return "Sou a Auria ðŸŒ¿, assistente ambiental do portal educativo da praÃ§a.";

  if(q.includes("criador") || q.includes("tiago"))
    return "Fui criada por Tiago Santos do Carmo como parte de um projeto educacional ðŸ˜„";

  if(q.includes("portal") || q.includes("qrcode") || q.includes("qr"))
    return "Os QR Codes levam para pÃ¡ginas com informaÃ§Ãµes sobre Ã¡rvores, jardins e histÃ³ria local.";

  /* ===== PRAÃ‡A ===== */
  if(q.includes("praca") || q.includes("parque")){
    lastTopic="praca";
    r=[
      "A praÃ§a Ã© espaÃ§o de lazer e convivÃªncia.",
      "Ela ajuda a refrescar a cidade.",
      "Ã‰ Ã³tima para atividades, descanso e contato com a natureza.",
      "PraÃ§as melhoram a qualidade de vida da populaÃ§Ã£o."
    ];
    return r[Math.floor(Math.random()*r.length)];
  }

  if(q.includes("lixo") || q.includes("sujeira")){
    lastTopic="praca";
    return "Manter a praÃ§a limpa protege animais e evita doenÃ§as.";
  }

  /* ===== ÃRVORES ===== */
  if(q.includes("ipe")){
    lastTopic="arvores";
    return "O IpÃª Amarelo floresce no inverno e Ã© sÃ­mbolo do Brasil ðŸ‡§ðŸ‡·";
  }

  if(q.includes("plantar") && q.includes("arvore")){
    lastTopic="arvores";
    return "Plantar Ã¡rvores ajuda no clima, na sombra e na qualidade do ar.";
  }

  if(q.includes("raiz")){
    lastTopic="arvores";
    return "As raÃ­zes ajudam a segurar o solo e evitam erosÃ£o.";
  }

  if(q.includes("arvore")){
    lastTopic="arvores";
    return "Ãrvores melhoram o clima, o ar e ajudam os animais. Quer saber sobre alguma espÃ©cie?";
  }

  /* ===== JARDINS ===== */
  if(q.includes("japones") || q.includes("oriental") || q.includes("zen")){
    lastTopic="jardins";
    return "Jardins japoneses buscam equilÃ­brio usando pedras, Ã¡gua e plantas.";
  }

  if(q.includes("europeu")){
    lastTopic="jardins";
    return "Jardins europeus sÃ£o mais simÃ©tricos e organizados, com caminhos bem definidos.";
  }

  if(q.includes("tropical")){
    lastTopic="jardins";
    return "Jardins tropicais usam plantas grandes, cores fortes e muita sombra.";
  }

  if(/\b(jardim|jardins)\b/.test(q)){
    lastTopic="jardins";
    return "Existem jardins japonÃªs, europeu e tropical. Qual vocÃª quer conhecer? ðŸŒ¸";
  }

  /* ===== MEIO AMBIENTE ===== */
  if(q.includes("reciclagem")){
    lastTopic="meioambiente";
    return "Reciclar reduz lixo e economiza recursos naturais.";
  }

  if(q.includes("agua")){
    lastTopic="meioambiente";
    return "Economizar Ã¡gua Ã© essencial para o futuro do planeta.";
  }

  if(q.includes("clima") || q.includes("aquecimento")){
    lastTopic="meioambiente";
    return "Plantar Ã¡rvores ajuda a reduzir o aquecimento das cidades.";
  }

  if(q.includes("meio ambiente") || q.includes("natureza")){
    lastTopic="meioambiente";
    return "Cuidar do meio ambiente Ã© cuidar do nosso futuro ðŸŒ Quer alguma dica prÃ¡tica?";
  }

  /* ===== MONUMENTOS ===== */
  if(q.includes("historia")){
    lastTopic="monumentos";
    return "A histÃ³ria ajuda a entender quem somos como comunidade.";
  }

  if(q.includes("monumento") || q.includes("estatua")){
    lastTopic="monumentos";
    return "Monumentos preservam a histÃ³ria e a identidade cultural da cidade.";
  }

  /* ===== AGRADECIMENTOS ===== */
  if(q.includes("obrigado") || q.includes("valeu") || q.includes("thanks")){
    r=[
      "De nada! ðŸŒ±",
      "Tamo junto ðŸ˜„",
      "Sempre por aqui!",
      "Qualquer coisa Ã© sÃ³ chamar ðŸŒ¿"
    ];
    return r[Math.floor(Math.random()*r.length)];
  }

  /* ===== FALLBACK INTELIGENTE ===== */
  r=[
    "Hmm ðŸ¤” nÃ£o peguei bemâ€¦ quer falar de jardins, Ã¡rvores ou da praÃ§a?",
    "Pode tentar de outro jeito? Posso ajudar com natureza ðŸŒ¿",
    "Ainda estou aprendendo ðŸ˜… mas sei bastante sobre paisagismo!",
    "NÃ£o entendi, mas manda outra que a gente resolve ðŸ˜„"
  ];
  return r[Math.floor(Math.random()*r.length)];
}


/* ===== ENVIO ===== */
function sendMsg(){
  const input=document.getElementById("userInput");
  if(!input.value.trim()) return;

  addMsg(input.value,"user");

  const typing=document.createElement("div");
  typing.className="msg bot typing";
  typing.innerText="Auria estÃ¡ digitando...";
  document.getElementById("messages").appendChild(typing);

  const q=input.value;

  setTimeout(()=>{
    typing.remove();
    addMsg(botReply(q),"bot");
  },500);

  input.value="";
}

document.getElementById("userInput")
  .addEventListener("keydown",e=>{ if(e.key==="Enter") sendMsg(); });
</script>

</body>
</html>
